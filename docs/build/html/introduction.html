

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; Riner 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Classes" href="class.html" />
    <link rel="prev" title="Riner documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/img_logo_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started with Riner</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-riner">What is Riner</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-riner">Running Riner</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-tutorial-code">Running Tutorial Code</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Api Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="class.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="function.html">Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Licensing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Riner</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="_images/img_banner_white.jpg" src="_images/img_banner_white.jpg" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-riner">
<h2>What is Riner<a class="headerlink" href="#what-is-riner" title="Permalink to this headline">¶</a></h2>
<p>Riner is a cryptocurrency mining application that can run a variety of “proof of work” algorithms on GPUs and communicate using different pool mining protocols.
The codebase is designed to make adding new algorithms as well as new pool protocols as simple and quick as possible.</p>
</div>
</div>
<div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>In order to build Riner the following dependencies should be installed:</p>
<ul class="simple">
<li><p>C++ compiler with support of the C++-14 standard</p></li>
<li><p><a class="reference external" href="https://cmake.org/">CMake</a> (version 3.9 or later)</p></li>
<li><p>Build tool supported by <code class="code docutils literal notranslate"><span class="pre">cmake</span></code> like <code class="code docutils literal notranslate"><span class="pre">make</span></code> (Unix), <code class="code docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span></code> (Windows), <code class="code docutils literal notranslate"><span class="pre">Xcode</span></code> (macOS) etc.</p></li>
<li><p><a class="reference external" href="https://www.khronos.org/registry/OpenCL/specs/2.2/html/OpenCL_ICD_Installation.html">OpenCL</a></p></li>
<li><p><a class="reference external" href="https://github.com/protocolbuffers/protobuf">Protocol Buffers</a></p></li>
<li><p>for SSL/TLS support (optional): <a class="reference external" href="https://www.openssl.org/source/">OpenSSL</a></p></li>
<li><p>for building tests (optional): <a class="reference external" href="https://github.com/google/googletest">GoogleTest</a></p></li>
</ul>
</div>
<div class="section" id="build">
<h2>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<p>First, install the required dependencies. On Ubuntu 18.04 the following packages might be installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">cmake</span> <span class="n">make</span> <span class="n">g</span><span class="o">++</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">opencl</span><span class="o">-</span><span class="n">headers</span> <span class="n">ocl</span><span class="o">-</span><span class="n">icd</span><span class="o">-</span><span class="n">libopencl1</span>
<span class="c1"># if /usr/lib/libOpenCL.so does not exist, then create it as symlink to /usr/lib/x86_64-linux-gnu/libOpenCL.so.1</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libprotobuf</span><span class="o">-</span><span class="n">dev</span> <span class="n">protobuf</span><span class="o">-</span><span class="n">compiler</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libssl</span><span class="o">-</span><span class="n">dev</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">googletest</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">googletest</span><span class="p">;</span> <span class="n">sudo</span> <span class="n">cmake</span> <span class="o">.</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span><span class="p">;</span> <span class="n">cd</span> <span class="o">-</span> <span class="p">)</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
<p>Some distributions split <code class="code docutils literal notranslate"><span class="pre">GoogleTest</span></code> into two packages, e.g. <code class="code docutils literal notranslate"><span class="pre">gtest</span></code> and <code class="code docutils literal notranslate"><span class="pre">gmock</span></code>.</p>
<p>Afterwards, clone the Riner repository and update submodules</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">--</span><span class="n">recurse</span><span class="o">-</span><span class="n">submodules</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">genesismining</span><span class="o">/</span><span class="n">Riner</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Then build the project using <code class="code docutils literal notranslate"><span class="pre">cmake</span></code> and <code class="code docutils literal notranslate"><span class="pre">make</span></code> or configure CMake to output build files for your favourite IDE.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">.</span>
<span class="n">make</span> <span class="n">riner</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running cmake will also download additional files such as ethash.cl from other repositories.</p>
</div>
<p>Now if we run the resulting executable, the following message will show up in the console output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">config</span> <span class="n">path</span> <span class="n">command</span> <span class="n">line</span> <span class="n">argument</span> <span class="p">(</span><span class="o">--</span><span class="n">config</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">textproto</span><span class="p">)</span>
</pre></div>
</div>
<p>Riner requires a .textproto configuration file to run any algorithms. For now only a basic OpenCL implementation of Cuckatoo31 and ethash can be run, which requires a GPU with 4GB of memory and a working OpenCL driver. Alternatively an example algorithm is available that can be used as a starting point for implementing your own proof of work in Riner.</p>
<p>In either case, providing a configuration file as described in the following section is required</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Here is an example of a valid config.textproto file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s2">&quot;0.1&quot;</span>

<span class="n">global_settings</span> <span class="p">{</span>
    <span class="n">api_port</span><span class="p">:</span> <span class="mi">4028</span>
    <span class="n">opencl_kernel_dir</span><span class="p">:</span> <span class="s2">&quot;kernel/dir/&quot;</span> <span class="c1">#dir which contains the opencl kernel files (e.g. ethash.cl)</span>
    <span class="n">start_profile_name</span><span class="p">:</span> <span class="s2">&quot;my_profile&quot;</span> <span class="c1">#when running Riner with this config file, the tasks of &quot;my_profile&quot; get launched</span>
<span class="p">}</span>

<span class="n">profile</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;my_profile&quot;</span>
    <span class="c1"># now specify tasks that will run in parallel as this profile is started</span>

    <span class="c1"># Task 1: run AlgoEthashCL on all devices</span>
    <span class="n">task</span> <span class="p">{</span>
        <span class="n">run_on_all_remaining_devices</span><span class="p">:</span> <span class="n">true</span>
        <span class="c1">#run this task on every gpu except gpu 1, which will run the task below</span>

        <span class="n">run_algoimpl_with_name</span><span class="p">:</span> <span class="s2">&quot;EthashCL&quot;</span>
        <span class="c1">#run the OpenCL ethash AlgoImpl. run riner --list-algoimpls for a list of all available AlgoImpls</span>

        <span class="n">use_device_profile_with_name</span><span class="p">:</span> <span class="s2">&quot;my_default_gpu_profile&quot;</span>
        <span class="c1">#my_gpu_profile has specific settings for AlgoEthashCL for this gpu type.</span>
    <span class="p">}</span>

    <span class="c1"># Task 1: run AlgoCuckatoo31 on GPU 1 (use --list-devices to find out about indices)</span>
    <span class="n">task</span> <span class="p">{</span>
        <span class="n">device_index</span><span class="p">:</span> <span class="mi">1</span>
        <span class="c1">#gpu 1 will not run the task above, but this one.</span>

        <span class="n">run_algoimpl_with_name</span><span class="p">:</span> <span class="s2">&quot;Cuckatoo31Cl&quot;</span>

        <span class="n">use_device_profile_with_name</span><span class="p">:</span> <span class="s2">&quot;my_AMD_gpu_profile&quot;</span>
        <span class="c1">#my_gpu_profile has specified other settings for AlgoCuckatoo31Cl</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">device_profile</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;my_AMD_gpu_profile&quot;</span>
    <span class="c1">#device profile, example name suggests they should be used for AMD gpus</span>

    <span class="n">settings_for_algoimpl</span> <span class="p">{</span> <span class="c1">#key value pairs</span>
        <span class="n">key</span><span class="p">:</span> <span class="s2">&quot;EthashCL&quot;</span>
        <span class="c1">#these settings are applied if AlgoEthashCL is started with this gpu profile</span>

        <span class="n">value</span> <span class="p">{</span>
        <span class="n">num_threads</span><span class="p">:</span> <span class="mi">4</span>
        <span class="n">work_size</span><span class="p">:</span> <span class="mi">1024</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">settings_for_algoimpl</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="s2">&quot;Cuckatoo31Cl&quot;</span>

        <span class="n">value</span><span class="p">:</span> <span class="p">{</span> <span class="c1">#settings:</span>
        <span class="n">work_size</span><span class="p">:</span> <span class="mi">512</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">device_profile</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;my_default_gpu_profile&quot;</span>
    <span class="c1">#generic device profile for no particular gpu</span>

    <span class="n">settings_for_algoimpl</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="s2">&quot;EthashCL&quot;</span>

        <span class="n">value</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">num_threads</span><span class="p">:</span> <span class="mi">4</span>
        <span class="n">work_size</span><span class="p">:</span> <span class="mi">1024</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># pools are listed by priority.</span>
<span class="c1"># e.g. if there are two ethash pools, the top most one will get used first,</span>
<span class="c1"># if that pool is unresponsive, work will get taken from the next ethash pool instead.</span>
<span class="c1"># To prevent idle time in such a case, riner has connections to all pools, even unused ones.</span>
<span class="c1"># if an unresponsive pool reawakens, its work will get used again.</span>

<span class="n">pool</span> <span class="p">{</span> <span class="c1">#if this pool is active it will provide work to all running AlgoImpls that are of pow_type &quot;ethash&quot;</span>
    <span class="n">pow_type</span><span class="p">:</span> <span class="s2">&quot;ethash&quot;</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="s2">&quot;stratum2&quot;</span>
    <span class="n">host</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="mi">2345</span>
    <span class="n">username</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
<span class="p">}</span>

<span class="n">pool</span> <span class="p">{</span>
    <span class="n">pow_type</span><span class="p">:</span> <span class="s2">&quot;cuckatoo31&quot;</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="s2">&quot;stratum&quot;</span>
    <span class="n">host</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="mi">2346</span>
    <span class="n">username</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
<span class="p">}</span>

<span class="n">pool</span> <span class="p">{</span> <span class="c1">#2nd ethash pool as a backup if the first one is unresponsive</span>
    <span class="n">pow_type</span><span class="p">:</span> <span class="s2">&quot;ethash&quot;</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="s2">&quot;stratum2&quot;</span>
    <span class="n">host</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="mi">2347</span>
    <span class="n">username</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more detailed information about the config file structure, see the protobuf source “Config.proto” in the <cite>src/config</cite> folder.</p>
</div>
</div>
<div class="section" id="running-riner">
<h2>Running Riner<a class="headerlink" href="#running-riner" title="Permalink to this headline">¶</a></h2>
<p>in order to run ethash, the “opencl_kernel_dir” option in “global_settings” must be set to the directory that ethash.cl was downloaded into by cmake.</p>
</div>
<div class="section" id="running-tutorial-code">
<h2>Running Tutorial Code<a class="headerlink" href="#running-tutorial-code" title="Permalink to this headline">¶</a></h2>
<p>If you want to get started adding new algorithms or pool protocols to Riner, the quickest way to get started is looking at the “AlgoDummy” and “PoolDummy” classes, which are extensively documented.
To run the tutorial code, just run</p>
<p>and read the log messages (you can change log verbosity via the -v=X command)</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="class.html" class="btn btn-neutral float-right" title="Classes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Riner documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Genesis Mining

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>